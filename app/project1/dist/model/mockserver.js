sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/thirdparty/sinon","require","sap/base/util/uid"],function(e,t,i,s){"use strict";return e.extend("project1.model.mockserver",{started:null,oModel:null,server:null,init:function(){},_updateModelWithData:function(e,t,i,n,o,r){switch(i){case"Create":this.oModel.getProperty("/items").unshift({id:e.id||s(),fileName:e.fileName,mediaType:e.fileType,url:e.fileUrl,uploadState:"Complete",revision:"00",status:"In work",fileSize:e.fileSize,lastModifiedBy:"Jane Burns",lastmodified:"10/03/21, 10:03:00 PM",documentType:e.documentType||"Invoice"});break;case"update":if(t){t.fileName=n?.name||"";t.url=o;t.fileSize=n?.size||0;t.mediaType=n?.type||"";this.oModel.setData(r)}break}},start:function(){debugger;const e=this;debugger;this.server=t.fakeServer.create();debugger;this.server.autoRespond=true;this.server.xhr.useFilters=true;this.server.xhr.addFilter(function(e,t){return!t.match(/\/uploadFiles/)});this.server.respondWith("POST",RegExp("/uploadFiles","i"),function(t){const i=t.requestBody||null;const n=t.requestHeaders||{};const o=n["existingDocumentID"];const r=e.oModel?.getData()||{};const l=r.items?.find(e=>e.id===o)||null;const a=n.documentUrl||URL.createObjectURL(i);let d=s().split("-")[1];const u={id:d,fileName:i?.name||"",fileUrl:a,fileSize:i?.size||0,fileType:i?.type||"",documentType:n.documentType||null};if(!l){e._updateModelWithData(u,null,"Create",i,a,r)}else{e._updateModelWithData(u,l,"update",i,a,r)}t.respond(201,{"Content-Type":"application/json"},JSON.stringify(u))});this.server.respondWith("DELETE",RegExp("/uploadFiles/.*","i"),function(t){const i=t.url.split("/");const s=i[i.length-1];const n=e.oModel.getData();n.items=n.items.filter(e=>e.id!==s);e.oModel.setData(n);t.respond(204,{},"")})},restore:function(){this.server.restore()},updateExisitingDocument:function(e){const t=this.oModel.getProperty("/items");const i=t.find(t=>t.id===e.id);if(i){i.fileName=e.fileName;i.url=e.url;i.fileSize=e.fileSize;i.mediaType=e.mediaType;this.oModel.setData({items:t})}}})});
//# sourceMappingURL=mockserver.js.map