sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/MessageToast"],function(e,t,n){"use strict";return e.extend("project1.controller.View1",{onInit:function(){debugger;const e=this.getOwnerComponent().getRouter();e.getRoute("View1").attachPatternMatched(this._onRouteMatched,this);let t=this.getOwnerComponent().getModel("userModel");if(!t){t=new sap.ui.model.json.JSONModel;this.getOwnerComponent().setModel(t,"userModel")}if(!t.getData().username){const e=localStorage.getItem("userData");if(e){t.setData(JSON.parse(e))}}if(!t.getData().username){sap.m.MessageToast.show("User not found. Please login again.");this.getOwnerComponent().getRouter().navTo("RouteLogin")}},_onRouteMatched:function(){const e=this.byId("leaveRequestTable");const t=e.getBinding("items");if(t){t.refresh()}},onAfterRendering:function(){debugger;const e=this.byId("leaveRequestTable");const t=e.getItems();t.forEach(e=>{const t=e.getCells()[4];const n=t.getText();if(n==="Approved"){t.addStyleClass("statusGreen")}else if(n==="Pending"){t.addStyleClass("statusOrange")}else if(n==="Cancel"){t.addStyleClass("statusRed")}})},onUpdate:function(e){debugger;var t=sap.ui.core.UIComponent.getRouterFor(this);t.navTo("UpdateLeaveReq");debugger},onCreate:function(e){debugger;var t=sap.ui.core.UIComponent.getRouterFor(this);t.navTo("LeaveReqObject");debugger},onViewLeave:function(e){const t=e.getSource().getParent().getParent().getBindingContext().getProperty("ID");this.getOwnerComponent().getRouter().navTo("LeaveReqDetailed",{ID:t})},onEditLeave:function(e){const t=e.getSource().getParent().getParent().getBindingContext().getProperty("ID");this.getOwnerComponent().getRouter().navTo("UpdateLeaveReq",{ID:t})},onDeleteLeave:function(e){debugger;var o=e.oSource.getModel().getServiceUrl();const s=e.getSource().getParent().getParent().getBindingContext();const r=this.getView().getModel();const a=s.getPath();t.confirm("Are you sure you want to delete this leave request?",{onClose:t=>{if(t==="OK"){debugger;const t=e.getSource().getParent().getParent().getBindingContext();const s=t.getProperty("ID");const a=`LeaveRequest(ID=${s},IsActiveEntity=true)`;debugger;$.ajax({url:o+a,type:"DELETE",success:function(){n.show("Leave request deleted.");r.refresh();debugger},error:function(){n.show("Failed to delete leave request.")}})}}})}})});
//# sourceMappingURL=View1.controller.js.map