sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("project1.controller.UpdateLeaveReq",{onInit:function(){debugger;const e=this.getOwnerComponent().getRouter();e.getRoute("UpdateLeaveReq").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){debugger;const t=e.getParameter("arguments").ID;if(!t){console.error("No ID passed to route.");return}const o=this.getView();const n=o.getModel();const s=`/LeaveRequest(ID='${t}',IsActiveEntity=true)`;o.bindElement({path:s,parameters:{},events:{dataReceived:function(e){const o=e.getParameter("data");debugger;if(!o){console.error("Leave request not found for ID:",t)}}}});const a=`${s}/files`;const r=n.bindList(a);r.requestContexts().then(function(e){debugger;const t=e.map(e=>e.getObject());o.getModel("documents").setProperty("/items",t)}).catch(function(e){console.error("Failed to load attachments:",e);sap.m.MessageToast.show("Failed to load attachments.")});const c=n.bindList(`${s}/comments`);debugger;c.requestContexts().then(function(e){debugger;if(e.length>0){const t=e[0].getObject();const n=o.byId("commentInput");if(n){n.setValue(t.commentsText||"")}}else{console.log("No comments found for this leave request.")}}).catch(function(e){console.error("Failed to load comments:",e);sap.m.MessageToast.show("Failed to load comments.")})},onSave:function(){this.getView().getModel().submitChanges({success:()=>sap.m.MessageToast.show("Leave Request Updated"),error:()=>sap.m.MessageBox.error("Update failed")})},onCancel:function(){this.getOwnerComponent().getRouter().navTo("LeaveRequestList")}})});
//# sourceMappingURL=UpdateLeaveReq.controller.js.map